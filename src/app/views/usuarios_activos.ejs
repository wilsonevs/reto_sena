<%- include("../includes/head.ejs") %> 
<%- include("../includes/header.ejs") %> 

<div style="height: 50px;"></div>
<section class="login-area section-padding-50-30" id="registro"></section>
<div class="container">
    <div class="card">
        </form>
            <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="table-responsive">
                        <div class="card-footer">
                            <table id="verTableUsuario" class="table table-striped table-hover table-bordered" style="width:100%">
                                <thead class="text-center thead-dark">
                                    <tr>
                                        <td class="text-center">Id Registro</td>
                                        <td class="text-center">Usuario</td>
                                        <td class="text-center">Nombre</td>
                                        <td class="text-center">Apellido</td>
                                        <td class="text-center">activo</td>
                                        <td class="text-center">Fecha de registro</td>
                                        <td class="text-center">Edició/Borrar</td>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <% for (var index=0; index < datos.length; index++) { %>
                                        <!-- <% if( datos[index].activo === "Activo" || datos[index].activo === "activo" ) {%>  -->
                                        <tr>
                                            <td class="text-center"><%= datos[index].id_usuario%></td>
                                            <td class="text-center"><%= datos[index].username%></td>
                                            <td class="text-center"><%= datos[index].firstname%></td>
                                            <td class="text-center"><%= datos[index].lastname%></td>
                                            <td class="text-center"><%= datos[index].activo%></td>
                                            <td class="text-center"><%= datos[index].fecha_creacion%></td>
                                            
                                            <td>
                                                <div class="row">
                                                    <button type="button" class="mr-1 btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal<%= datos[index].id_usuario %>" data-bs-whatever="@mdo"><i class="fas fa-marker"></i></button>
                                                        <div style="height: 5px;"></div>
                                                    <a class="mr-1 btn btn-danger"  href="/deleteactivos/<%= datos[index].id_usuario %>"> <i class="fas fa-trash-alt"></i></a>
                                                </div>
                                            </td>
                                        </tr>

                                        <div class="modal fade" id="exampleModal<%= datos[index].id_usuario %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                              <div class="modal-content">
                                                <div class="modal-header">
                                                  <h5 class="modal-title" id="exampleModalLabel">Actualización</h5>
                                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                  <form method="POST" action="/updateactivos/<%= datos[index].id_usuario%>">
                                                    <div class="mb-3">
                                                      <label for="recipient-name" class="col-form-label">Usuario:</label>
                                                      <input type="text" name="username" class="form-control" id="recipient-name" value="<%= datos[index].username %>">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="recipient-name" class="col-form-label">Nombre:</label>
                                                        <input type="text" name="firstname" class="form-control" id="recipient-name"  value="<%= datos[index].firstname %>">
                                                      </div>
                                                    <div class="mb-3">
                                                        <label for="recipient-name" class="col-form-label">Apellido:</label>
                                                        <input type="text" name="lastname" class="form-control" id="recipient-name"  value="<%= datos[index].lastname %>">
                                                      </div>
                                                      <div class="mb-3">
                                                        <label for="recipient-name" class="col-form-label">Activo:</label>
                                                        <select class="form-control" name="activo">
                                                            <option value="Activo" selected>Activo</option>
                                                            <option value="Inactivo" >Inactivo</option>
                                                          </select>
                                                      </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                        <input type="submit" class="btn btn-secondary" value="Actualizar">
                                                    </div>
                                                </form>
                                              </div>
                                            </div>
                                          </div>
                                          <% } %>
                                        <% } %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>
</section>


<!-- ##### Breadcumb Area End ##### -->
<%- include('../includes/footer.ejs') %>

<!-- Iniciar alerta -->

<% if(typeof alert !="undefined" ) { %>
    <script>
        Swal.fire({
            title: '<%= alertTitle  %>',
            text: '<%= alertMessage %>',
            icon: '<%= alertIcon %>',
            showConfirmButton: '<%= showConfirmButton %>',
            timer: 2500
        }).then(() => {
            window.location = '/<%= ruta %>'
        })
    </script>
    <% } %>

        <!-- Fin alerta -->
<%- include("../includes/head.ejs") %> 
<%- include("../includes/header.ejs") %> 


<% for(let index =0; index < datos.length; index++) { %> 
    <% if( datos[index].username === username) { %> 
    <!-- Diseño de perfil -->
    <div class="container w-50 bg-light my-5 rounded-3 shadow">
        <div class="row align-items-stretch">
            <div class="col bg d-none d-lg-block col-md-5 col-lg-5 col-xl-6 rounded-start">
                <img type="file" class="bg_fondo rounded-circle mt-5" src="src/utils/logo/logo.png" >
                <h1 class="mt-3" style="text-align:center; color: #fff;"><%= datos[index].username %></h1>
            </div>
            <div class="col bg-white p-5 rounded-end">
                    <!-- inicio -->
                    <div class="row mt-3">
                        <div class="col-12 mb-1">
                            <label class="form-label" style="font-size: 17px; color: #696969; ">
                                <strong>Usuario: </strong> <%= datos[index].username %>
                            </label>
                        </div>
                        <div class="col-12 mb-1">
                            <label class="form-label" style="font-size: 17px; color: #696969; ">
                                <strong>Nombre:</strong> <%= datos[index].firstname %>
                            </label>
                        </div>
                        <div class="col-12 mb-1">
                            <label class="form-label" style="font-size: 17px; color: #696969; ">
                                <strong>Apellido:</strong> <%= datos[index].lastname %>
                            </label>
                        </div>
                        <div class="col-12 mb-1">
                            <label class="form-label" style="font-size: 17px; color: #696969; ">
                                <strong>Activo:</strong> <%= datos[index].activo %>
                            </label>
                        </div>
                        <div class="d-grid">
                            <button type="button" class="mr-1 btn btn-dark" data-bs-toggle="modal" data-bs-target="#exampleModal<%= datos[index].id_usuario%>"data-bs-whatever="@mdo"><i class="fas fa-marker"></i></button>
                        </div>
    
                    </div>
                </div>
                    <!-- final -->
            <!-- modal -->
            <div class="modal fade my-5" id="exampleModal<%= datos[index].id_usuario %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Actualización</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="updateperfil/<%= datos[index].id_usuario %>" method="POST">
                            <div class="mb-3">
                                <label for="recipient-name" class="col-form-label">Usuario:</label>
                                <input type="file" name="username" class="form-control" id="recipient-name" value="<%= datos[index].username%>">
                              </div>
                            <div class="mb-3">
                              <label for="recipient-name" class="col-form-label">Nombre:</label>
                              <input type="text" name="firstname" class="form-control" id="recipient-name" value="<%= datos[index].firstname%>">
                            </div>
                            <div class="mb-3">
                                <label for="recipient-name" class="col-form-label">Apellido:</label>
                                <input type="text" name="lastname" class="form-control" id="recipient-name"  value="<%= datos[index].lastname%>">
                              </div>
                            <div class="mb-3">
                                <label for="recipient-name" class="col-form-label">Activo:</label>
                                                        <select class="form-control" name="activo">
                                                            <option value="Activo" selected>Activo</option>
                                                            <option value="Inactivo" >Inactivo</option>
                                                          </select>
                              </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                                <input type="submit" class="btn btn-primary" value="Actualizar">
                            </div>
                        </form>
                    </div>
                </div>
              </div>
        </div>
    </div>
    <% } %> 
<% } %> 

<%- include('../includes/footer.ejs')  %>


<!-- Iniciar alerta -->

<% if(typeof alert !="undefined") { %>
    <script>
        Swal.fire({
            title: '<%= alertTitle  %>',
            text: '<%= alertMessage %>',
            icon: '<%= alertIcon %>',
            showConfirmButton:'<%= showConfirmButton %>',
            timer:  '<%= timer %>',
        }).then(()=>{
            window.location= '/<%= ruta %>'
        })
    </script>
<% } %>
    
<!-- Fin alerta -->